<!DOCTYPE html>
<html>
<head>
  <meta charset='utf-8'>

  <title>lorieri/zabbix @ GitHub</title>

  <style type="text/css">
    body {
      margin-top: 1.0em;
      background-color: #0865a0;
      font-family: Helvetica, Arial, FreeSans, san-serif;
      color: #ffffff;
    }
    #container {
      margin: 0 auto;
      width: 700px;
    }
    h1 { font-size: 3.8em; color: #f79a5f; margin-bottom: 3px; }
    h1 .small { font-size: 0.4em; }
    h1 a { text-decoration: none }
    h2 { font-size: 1.5em; color: #f79a5f; }
    h3 { text-align: center; color: #f79a5f; }
    a { color: #f79a5f; }
    .description { font-size: 1.2em; margin-bottom: 30px; margin-top: 30px; font-style: italic;}
    .download { float: right; }
    pre { background: #000; color: #fff; padding: 15px;}
    hr { border: 0; width: 80%; border-bottom: 1px solid #aaa}
    .footer { text-align:center; padding-top:30px; font-style: italic; }
  </style>
</head>

<body>
  <a href="http://github.com/lorieri/zabbix"><img style="position: absolute; top: 0; right: 0; border: 0;" src="http://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub" /></a>

  <div id="container">

    <div class="download">
      <a href="http://github.com/lorieri/zabbix/zipball/master">
        <img border="0" width="90" src="http://github.com/images/modules/download/zip.png"></a>
      <a href="http://github.com/lorieri/zabbix/tarball/master">
        <img border="0" width="90" src="http://github.com/images/modules/download/tar.png"></a>
    </div>

    <h1><a href="http://github.com/lorieri/zabbix">zabbix</a>
      <span class="small">by <a href="http://github.com/lorieri">lorieri</a></span></h1>

    <div class="description">
      zabbix templates, scripts, and chef automations usable POC for aws deploys
    </div>

<h2>About</h2>
This is an usable prove of concept on how to manage an efficient monitoring
over AWS installations.<br>
<br>
It shows concepts on how to aggregate values to persist of volatile instances
creation and destruction and still be able to plan for best resources usage<br>
<br>
Another concept show is the usage of trapper items to have get all items
values in a host at same time and have better notion of that given instance
helping build better calculations and comparsions, for example for 
success/error ratings and backend/cached/user requests <br>
<br>
It has a modificated Linux basic template that abstracts values make it
easier to use templates for all machines you have, and includes the cpu steal
time that is important for vms and Amazon instances<br>
<br>
The last feature is the auto-registration and auto-de-registration of the
machines. Registration can be explored not only for amazon, but especially
for environments controled by automations, like Chef. Deregistration is based
on Amazon AWS, specially the autoscaling service were your machines' pool
increase and decrease dinamically <br>
<br>
Please use Zabbix > 1.8.5, for ubuntu you can get it from here<br>
http://packages.ubuntu.com/oneiric/zabbix-agent<br>
Minor version has api problems<br>
<br>
If you like opscode's chef, start with this coockbook, my cookbook extend its
features:<br>
http://community.opscode.com/cookbooks/zabbix<br>

<h2>Plan</h2>
- convert original scripts to github while creating documentation<br>
- instructions for non-chef users<br>
- test an complete deploy<br>
- update the documentation<br>
<br>
<h2>Done:</h2>
- <font color=red>TESTED<font>-> cloudwatch template, script and chef automation<br>
- <font color=red>TESTED<font>-> linux basic template with abstractions and some EC2 optimizations<br>
- <font color=red>TESTED<font>-> varnish template using trapper items examples for better consistency, speed and distribution<br>
&nbsp;&nbsp;&nbsp;will be the base for auto-register and de-register examples<br>
- <font color=red>TESTED<font>-> varnish aggregation template using calculated items by groups<br>
&nbsp;&nbsp;&nbsp;to have a capacity overview of the group and to persist volatile instances data<br>
- <font color=red>TESTED<font>-> auto-register for bootstrapping <br>
- <font color=red>TESTED<font>-> auto de-register<br>
<br>
<h2>TODO/Limitations/Known issues:</h2>
- better instructions for multiple aws accounts<br>
- more info about aggregations and capacity view by groups and its relation to dead instances<br>
- update the cloudwatch template to trigger the de-registration script passing {mygroup} and {myaccount}
  and intructions to use multiple groups and mulitple accounts<br>
- use more python, specially for de-registration<br>
- fix the max of 5 AWS accounts silly limitation<br>
- make better and centralized documentation<br>
- build a step-by-step walkthrough<br>
- put all variables in the chef's attributes<br>
- build a script to generate the scripts independent of chef for manual
   instaltion or to be used with another automation tool<br>
- improve the calculate itens for low traffic machines don't divide by zero
   and disable the item/trigger for a while <br>
- <b>test an complete deploy</b><br>
<br>
</p>
<h2>Dependencies</h2>
<p>if you are going to put it on chef: http://community.opscode.com/cookbooks/zabbix</p>
<h2>Install</h2>
<p>check the readme files at the repository tree</p>
<h2>License</h2>
<p>bsd until I come out with something else</p>
<br/>      </p>
<h2>Contact</h2>
<p>lorieri (lorieri@ google mail dot com)
<br/>      </p>


    <h2>Download</h2>
    <p>
      You can download this project in either
      <a href="http://github.com/lorieri/zabbix/zipball/master">zip</a> or
      <a href="http://github.com/lorieri/zabbix/tarball/master">tar</a> formats.
    </p>
    <p>You can also clone the project with <a href="http://git-scm.com">Git</a>
      by running:
      <pre>$ git clone git://github.com/lorieri/zabbix</pre>
    </p>

    <div class="footer">
      get the source code on GitHub : <a href="http://github.com/lorieri/zabbix">lorieri/zabbix</a>
    </div>

  </div>

  
</body>
</html>
