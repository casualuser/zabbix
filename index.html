lor<i!DOCTYPE html>
<html>
<head>
  <meta charset='utf-8'>

  <title>lorieri/zabbix @ GitHub</title>

  <style type="text/css">
    body {
      margin-top: 1.0em;
      background-color: #0865a0;
      font-family: Helvetica, Arial, FreeSans, san-serif;
      color: #ffffff;
    }
    #container {
      margin: 0 auto;
      width: 700px;
    }
    h1 { font-size: 3.8em; color: #f79a5f; margin-bottom: 3px; }
    h1 .small { font-size: 0.4em; }
    h1 a { text-decoration: none }
    h2 { font-size: 1.5em; color: #f79a5f; }
    h3 { text-align: center; color: #f79a5f; }
    a { color: #f79a5f; }
    .description { font-size: 1.2em; margin-bottom: 30px; margin-top: 30px; font-style: italic;}
    .download { float: right; }
    pre { background: #000; color: #fff; padding: 15px;}
    hr { border: 0; width: 80%; border-bottom: 1px solid #aaa}
    .footer { text-align:center; padding-top:30px; font-style: italic; }
  </style>
</head>

<body>
  <a href="http://github.com/lorieri/zabbix"><img style="position: absolute; top: 0; right: 0; border: 0;" src="http://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub" /></a>

  <div id="container">

    <div class="download">
      <a href="http://github.com/lorieri/zabbix/zipball/master">
        <img border="0" width="90" src="http://github.com/images/modules/download/zip.png"></a>
      <a href="http://github.com/lorieri/zabbix/tarball/master">
        <img border="0" width="90" src="http://github.com/images/modules/download/tar.png"></a>
    </div>

    <h1><a href="http://github.com/lorieri/zabbix">lorieri/zabbix</a>
      <span class="small">by <a href="http://github.com/lorieri">lorieri</a></span></h1>

    <div class="description">
	PoC for effective cloud capacity management and Amazon AWS monitoring using Zabbix and Chef automation
    </div>

<h2>About</h2>
This is an usable proof of concept on how to manage an efficient capacity planning (do more with less) and monitoring for cloud computing over Amazon's AWS installations and using Zabbix SIA's monitoring tool and Opscode's Chef automation tool.<br>
<br>
100% tested (by me only)<br>
100% documented, but you need to know AWS, Zabbix and Chef<br>
100% templated<br>
100% automated (as possible)<br>
<br>
<h2>Graphics examples</h2>
<a href="img/autoscaling.png.html"><img src="img/autoscaling.thumb.png" alt="Autoscaling"></a><a href="img/cache.png.html"><img src="img/cache.thumb.png" alt="Cache"></a><a href="img/peaks.png.html"><img src="img/peaks.thumb.png" alt="Peaks"></a><a href="img/requests.png.html"><img src="img/requests.thumb.png" alt="Requests"></a><a href="img/swap.png.html"><img src="img/swap.thumb.png" alt="Swap"></a><a href="img/IO.png.html"><img src="img/IO.thumb.png" alt="IO"></a><a href="img/idle.png.html"><img src="img/idle.thumb.png" alt="Idle"></a><a href="img/mem.png.html"><img src="img/mem.thumb.png" alt="Memory"></a>
<br>
<h2>Goals</h2>
It has 6 main goals:<br>
  <li> Templatization
  <li> Aggregation
  <li> Resources optimization
  <li> Abstraction
  <li> Auto-register, auto-deregister
  <li> Chef automation 
<br>
<br>
Those concepts are not new nor invented by me, but here you can find an easy
way to implement them either for AWS or any other environment.<br>
<br>

<b>Templatization</b><br>
<br>
Shows how can the entire Zabbix configuration be templated, exploring this
awesome Zabbix's feature.<br>
<br>
<b>Aggregation</b><br>
<br>
By aggregating groups it is easy to manage and persist values of volatile
AWS instances creation and destruction, and still be able to plan for best
resources usage. It is similiar as how Cloudwatch do, but lasts longer than
few weeks.<br>
<br>

<b>Resources optimization</b><br>
<br>
By using trapper items ("listeners"), show how to send all the values at same
time from the zabbix_sender tool. It helps to get snapshots of a moment and
make calculations more accurate. It also avoids long configurations in the
agent side.<br>
By trying to use only the built-in agent items to build the LinuxBasic template.<br>
<br>

<b>Abstraction</b><br>
<br>
By modificating the default Linux template adding some more abstraction making
it easier to use the same template for all machines you have. It also includes
the cpu steal time that is important for vms and EC2 Amazon instances.<br>
<br>

<b>Auto-register, auto-deregister</b><br>
<br>
Not only building a script for auto-registration, but showing how to make it 
efficient exploring the goals above. The script is also based in the Zabbix's
API. Deregistration is based on Amazon AWS, specially the autoscaling service
were your machines' pool increases and decreases dinamically.<br>
<br>

<h2>Plan</h2>
- Done: convert original scripts to github while creating documentation<br>
- Done: instructions for non-chef users<br>
- Done: instructions for multiple AWS accounts<br>
- Done: test a complete deploy<br>
- Done: update the documentation after the deploy<br>
<br>
<h2>Components</h2>
<li> cloudwatch template, script and chef automation, pre-configured for Total account usage, RDS and AutoScaling<br><br> 
<li> linux basic template with abstractions and some EC2 optimizations<br><br>
<li> varnish template using trapper items examples for better consistency, speed and distribution will be the base for auto-register and de-register examples<br><br>
<li> varnish aggregation template using calculated items by groups to have a capacity overview of the group and to persist volatile instances data<br><br>
<li> auto-register for bootstrapping<br><br>
<li> auto de-register<br>
<br>
<br>
<h2>TODO/Limitations/Known issues:</h2>
- use more python, specially for de-registration<br>
- fix the max of 5 AWS accounts silly limitation<br>
- make a centralized documentation<br>
- build a step-by-step walkthrough<br>
- improve the calculate itens for low traffic machines don't divide by zero and disable<br>
&nbsp;&nbsp;the item/trigger for a while <br>
<br>
</p>
<h2>Dependencies</h2>
<p>zabbix, of course</p>
<p>if you are going to put it on chef: http://community.opscode.com/cookbooks/zabbix</p>
<h2>Install</h2>
<p>check the readme files at the repository tree</p>
<h2>License</h2>
<p>bsd until I come out with something else</p>
<br/>      </p>
<h2>Contact</h2>
<p>lorieri (lorieri@ google mail dot com)
</p>
<h2>Related projects</h2>
<p>http://code.google.com/p/mikoomi/</p>


    <h2>Download</h2>
    <p>
      You can download this project in either
      <a href="http://github.com/lorieri/zabbix/zipball/master">zip</a> or
      <a href="http://github.com/lorieri/zabbix/tarball/master">tar</a> formats.
    </p>
    <p>You can also clone the project with <a href="http://git-scm.com">Git</a>
      by running:
      <pre>$ git clone git://github.com/lorieri/zabbix</pre>
    </p>

    <div class="footer">
      get the source code on GitHub : <a href="http://github.com/lorieri/zabbix">lorieri/zabbix</a>
    </div>

  </div>

  
</body>
</html>
